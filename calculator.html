<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>계산기</title>
    <style>
        * { box-sizing: border-box;}
        #result { width: 180px; height: 50px; margin: 5px;  text-align: right;}
        #operator { width: 50px; height: 50px; margin: 5px;  text-align: center;}
        button { width: 50px; height: 50px; margin: 5px }
        
    </style>
</head>

<!-- 계산기 형태 구현-->
<body>
    <input readonly id = "operator">
    <input readonly type = "number" id = "result">
    <div class = "row">
        <button id = "num-7">7</button>
        <button id = "num-8">8</button>
        <button id = "num-9">9</button>
        <button id = "plus">+</button>
    </div>
    <div class = "row">
        <button id = "num-4">4</button>
        <button id = "num-5">5</button>
        <button id = "num-6">6</button>
        <button id = "divide">/</button>
    </div>
    <div class = "row">
      <button id = "num-1">1</button>
      <button id = "num-2">2</button>
      <button id = "num-3">3</button>
      <button id = "minus">-</button>
  </div>
    <div class = "row">
        <button id = "clear">C</button>
        <button id = "num-0">0</button>
        <button id = "calculate">=</button>
        <button id = "multiply">*</button>
    </div>
    <script>
        let numOne = '';
        let operator = '';
        let numTwo = '';
        const $operator = document.querySelector('#operator');
        const $result = document.querySelector("#result");
        
        /*매개변수를 사용하여 반복되는 중복 제거하기2
        const onClickNumber = (number) => {
          if(operator){
            numTwo += number;
          } else{ 
              numOne += number;
            }
            $result.value += number;
            //return undefined;가 생략되어 있음
        }
        */

        /*매개변수를 사용하여 반복되는 중복 제거하기3
        //함수안에 return값이 선언되지 않으면 항상 undefined를 기본값으로 반환하는 것을 생각하여
        //return값을 만들어줘야 해당 코드가 작동함
        const onClickNumber = (number) => {
          return () => { //return값을 함수로 만들고
          if(operator){ //함수 안에 동작에 관한 코드를 넣어준다
            numTwo += number; //함수 안에 함수가 들어간 것을 고차함수라고 함
          } else{ 
              numOne += number;
            }
            $result.value += number;
          }
        }
        */

        /*매개변수를 사용하여 반복되는 중복 제거하기4
        const onClickNumber = (number) =>() => { // {} + return이 생략된 것. 화살표함수에서 {} + return이 뒤따른다면 이는 생략 가능하다
            if(operator){                        // 화살표함수가 연달아 있는 경우: 함수 안에 함수가 있다 or 함수가 함수를 return한다
              numTwo += number;                  // high order function(고차함수)
            }
            else{
              numOne += number;
            }
            $result.value += number;
          }
        */

        /*고차함수를 쓰지 않고 중복을 제거(잔기술)
        const onClickNumber = (event) =>{
          if(operator){
            if (!numTwo) { //numOne이 화면에 있고, numTwo를 눌렀을 때 화면에 있는 numOne을 ''으로 지우고
              $result.value = '';
            }
            numTwo += event.target.textContent; //numTwo에 textContent값 저장
          }
          else{
            numOne += event.target.textContent;
          }
          $result.value += event.target.textContent; // 및 출력
        }
        */

        /*if문 중첩 줄이기 1
        const onClickNumber = (event) =>{
          if(operator){
            if (!numTwo) { 
              $result.value = '';
            }
            numTwo += event.target.textContent; 
            $result.value += event.target.textContent; // 1. 중복되게 각 절차에 넣어주기
          }
          else{
            numOne += event.target.textContent;
            $result.value += event.target.textContent; // 1. 중복되게 각 절차에 넣어주고
          }
          //$result.value += event.target.textContent; 1. 공통된 분기점을
        }
        */

        //if문 중첩 줄이기 2
        const onClickNumber = (event) =>{
          if(!operator){ // 2. 더 짧은 구문을 위로 올리면서 else였던게 if자리로 들어오므로 주어진 조건을 역으로 변경
            //if operator == '' -> false -> !operator -> ture 즉, 비어있다
            numOne += event.target.textContent; // 2. 더 짧은 구문을 위로 올린다
            $result.value += event.target.textContent;
            return; // 3. 짧은 구문이 끝나면 함수 종료
          }
          //else { 4. return을 해주면 더이상 아래코드는 실행되지 않기 때문에 else문은 필요 없어짐(if문 중첩이 제거 됨)
          if(!numTwo) { //2. 긴 구문은 아래로
              $result.value = '';
            }
            numTwo += event.target.textContent; 
            $result.value += event.target.textContent; 
          }
        //}
        

        const onClickOperator = (op) => () => {
          if(numTwo) {
            if(operator === '+'){ 
              $result.value = parseInt(numOne) + parseInt(numTwo);
            }
            if(operator === '-'){ 
              $result.value = parseInt(numOne) - parseInt(numTwo);
            }
            if(operator === '/'){
              $result.value = parseInt(numOne) / parseInt(numTwo);
            }
            if(operator === '*'){
              $result.value = parseInt(numOne) * parseInt(numTwo);
            }
            numOne = $result.value;
            numTwo = '';
          }
          if(numOne){        
              operator = op;
              $operator.value = op;                 
            }
            else{
              alert('숫자를 먼저 입력하세요.')
            }
          }
        
        
        document.querySelector('#num-0').addEventListener('click', onClickNumber);
        document.querySelector('#num-1').addEventListener('click', onClickNumber);
        document.querySelector('#num-2').addEventListener('click', onClickNumber);
        document.querySelector('#num-3').addEventListener('click', onClickNumber);
        document.querySelector('#num-4').addEventListener('click', onClickNumber);
        document.querySelector('#num-5').addEventListener('click', onClickNumber);
        document.querySelector('#num-6').addEventListener('click', onClickNumber);
        document.querySelector('#num-7').addEventListener('click', onClickNumber);
        document.querySelector('#num-8').addEventListener('click', onClickNumber);
        document.querySelector('#num-9').addEventListener('click', onClickNumber);
        document.querySelector('#plus').addEventListener('click', onClickOperator('+'));
        document.querySelector('#minus').addEventListener('click', onClickOperator('-'));
        document.querySelector('#divide').addEventListener('click', onClickOperator('/'));
        document.querySelector('#multiply').addEventListener('click', onClickOperator('*'));
        document.querySelector('#calculate').addEventListener('click', () => {
        /*계산결과를 switch문을 활용하여 나타내기  
        if(numTwo) {
            switch (operator) {
              case '+':
                $result.value = parseInt(numOne) + parseInt(numTwo);
                break;
              case '-':
                $result.value = parseInt(numOne) - parseInt(numTwo);
                break;
              case '/':
                $result.value = parseInt(numOne) / parseInt(numTwo);
                break;
              case '*':
                $result.value = parseInt(numOne) * parseInt(numTwo);
                break;
                default:
                  break;
            }
          }
        })
        */
          //게산결과를 if문을 활용하여 나타내기
          if(numTwo) {
            if(operator === '+'){ //문자열간 더하기는 문자열 + 문자열로 나타나므로 숫자로 바꿔줘야 함
              $result.value = parseInt(numOne) + parseInt(numTwo);
            }
            if(operator === '-'){ // -, /, * 는 JS에서 자동으로 문자열을 숫자열로 인식하여 그대로 계산하므로 parseInt를 할 필요는 없음
              $result.value = parseInt(numOne) - parseInt(numTwo);
            }
            if(operator === '/'){
              $result.value = parseInt(numOne) / parseInt(numTwo);
            }
            if(operator === '*'){
              $result.value = parseInt(numOne) * parseInt(numTwo);
            }
            $operator.value = '';
            numOne = $result.value;
            operator = '';
            numTwo = '';
          }
          else {
            alert('숫자를 먼저 입력하세요.')
          }
        });
          //

        document.querySelector('#clear').addEventListener('click', () => {
          numOne = '';
          operator = '';
          numTwo = '';
          $operator.value = '';
          $result.value = '';
        });
        
        
        /*매개변수를 사용하여 반복되는 중복 제거하기1
        document.querySelector('#num-0').addEventListener('click', (number) => {
          if(operator){ //operator변수가 비어있지 않다
            numTwo += 'number';
          } else{ //operator변수가 비어있다
              numOne += 'number';
            }
            $result.value += 'number';
        });
        */
        
        
        /*document.querySelector('#num-0').addEventListener('click', () => {
          if(operator){ //operator변수가 비어있지 않다
            numTwo += '0';
          } else{ //operator변수가 비어있다
              numOne += '0';
            }
            $result.value += 0;
        });
        document.querySelector('#num-1').addEventListener('click', () => {
          if(operator){
            numTwo += '1';
          } else{
              numOne += '1';
            }
            $result.value += '1';
        });
        document.querySelector('#num-2').addEventListener('click', () => {
          if(operator){
            numTwo += '2';
          } else{
              numOne += '2';
            }
            $result.value += '2';
        });
        document.querySelector('#num-3').addEventListener('click', () => {
          if(operator){
            numTwo += '3';
          } else{
              numOne += '3';
            }
            $result.value += '3';
        });
        document.querySelector('#num-4').addEventListener('click', () => {
          if(operator){
            numTwo += '4';
          } else{
              numOne += '4';
            }
            $result.value += '4';
        });
        document.querySelector('#num-5').addEventListener('click', () => {
          if(operator){
            numTwo += '5';
          } else{
              numOne += '5';
            }
            $result.value += '5';
        });
        document.querySelector('#num-6').addEventListener('click', () => {
          if(operator){
            numTwo += '6';
          } else{
              numOne += '6';
            }
            $result.value += '6';
        });
        document.querySelector('#num-7').addEventListener('click', () => {
          if(operator){
            numTwo += '7';
          } else{
              numOne += '7';
            }
            $result.value += '7';
        });
        document.querySelector('#num-8').addEventListener('click', () => {
          if(operator){
            numTwo += '8';
          } else{
              numOne += '8';
            }
            $result.value += '8';
        });
        document.querySelector('#num-9').addEventListener('click', () => {
          if(operator){
            numTwo += '9';
          } else{
              numOne += '9';
            }
            $result.value += '9';
        });
        document.querySelector('#plus').addEventListener('click', () => {
          
        });
        document.querySelector('#divide').addEventListener('click', () => {
        
        });
        document.querySelector('#minus').addEventListener('click', () => {
          
        });
        document.querySelector('#clear').addEventListener('click', () => {
          
        });
        document.querySelector('#calculate').addEventListener('click', () => {
          
        });
        document.querySelector('#multiply').addEventListener('click', () => {
          
        });
        */
    </script>
</body>
</html>